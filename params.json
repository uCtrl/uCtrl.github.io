{"name":"uCtrl.github.io","tagline":"","body":"# ÂµCtrl Protocol definition\r\n---\r\n\r\n## System definition\r\n\r\nWe can pretty much serialize the whole system in a single JSON. The structure is a tree and these are the nodes:\r\n\r\n`System > Platform > Device > Scenario > Task > Condition`\r\n\r\nSo, what's inside each node is subject to change, but here's the idea\r\n\r\nLogically, we can't exchange a system JSON because the communication access points are on a platform. We will start with  Platform definition\r\n\r\n#### Platform\r\n```json\r\n{\r\n   \"enabled\":\"ON\",\r\n   \"id\":1,\r\n   \"name\":\"Television Set\",\r\n   \"room\":\"Living room\",\r\n   \"devices\":[\r\n      ...\r\n   ]\r\n}\r\n```\r\n*When don't need to send ip or port property since we already have that information on both sides.* \r\n\r\n\r\n#### Device\r\n```json\r\n{\r\n   \"id\":2,\r\n   \"maxValue\":100,\r\n   \"minValue\":0,\r\n   \"name\":\"Temperature A\",\r\n   \"precision\":5,\r\n   \"type\":1,\r\n   \"unitLabel\":\"\\u00B0C\",\r\n   \"isTriggerValue\":false,\r\n   \"scenarios\":[\r\n      ...\r\n   ]\r\n}\r\n```\r\n\r\n#### Scenario\r\n```json\r\n{\r\n   \"id\":3,\r\n   \"name\":\"Semaine\",\r\n   \"tasks\":[\r\n      ...\r\n   ]\r\n}\r\n```\r\n\r\n#### Task\r\n```json\r\n{\r\n   \"id\":4,\r\n   \"status\":\"21\",\r\n   \"conditions\":[\r\n      ...\r\n   ]\r\n```\r\n\r\n#### Condition\r\n```json\r\n{\r\n   \"id\":5,\r\n   \"type\":1,\r\n   \"beginDate\":\"2014-03-31\",\r\n   \"endDate\":\"2014-03-31\"\r\n}\r\nou\r\n{\r\n   \"id\":6,\r\n   \"type\":3\r\n}\r\n```\r\n## Communication\r\n\r\nAll the requests are supposed to come out of the application to the platform. So, the communication is breakdown in two types: Requests and Responses.\r\n\r\n**EVERY JSON SHOULD END WITH AN EOT CHARACTER**\r\n\r\n### Requests\r\n\r\n#### Shell\r\nThe shell for requests is:\r\n\r\n```json\r\n{\r\n   \"messageType\": X,\r\n   \"size\": Y,\r\n   \"YYY\": {...}\r\n}\r\n```\r\nwhere X is the enum of the request (number), Y is the size of the array and YYY is the additional information required.\r\n\r\n#### Get\r\n\r\n##### GetPlatform (1)\r\nThis request will return name of the platform, room and other addtional information.\r\n```json\r\n{\r\n   \"messageType\":1\r\n}\r\n```\r\n##### GetDevices (3)\r\nThis request will return an array of Devices containing basic information on the devices.\r\n```json\r\n{\r\n   \"messageType\":3\r\n}\r\n```\r\n##### GetScenarios (5)\r\nThis request will return an array of Scenarios based on the deviceId.\r\n```json\r\n{\r\n   \"messageType\":5,\r\n   \"deviceId\": X\r\n}\r\n```\r\nWhere X is the real device Id\r\n##### GetTasks (7)\r\nThis request will return an array of Tasks based on the scenarioId.\r\n```json\r\n{\r\n   \"messageType\":7,\r\n   \"scenarioId\": X\r\n}\r\n```\r\nWhere X is the real scenario Id\r\n##### GetConditions (9)\r\nThis request will return an array of Conditions based on the taskId.\r\n```json\r\n{\r\n   \"messageType\":9,\r\n   \"TaskId\": X\r\n}\r\n```\r\nWhere X is the real task Id\r\n\r\n#### Save\r\n##### SavePlatform (11)\r\nThis request will send basic informations on the platform.\r\n```json\r\n{\r\n   \"messageType\":11,\r\n   \"size\": 1,\r\n   \"platform\": {\r\n      \"id\":1,\r\n      \"enabled\":\"ON\",\r\n      \"name\":\"Television Set\",\r\n      \"room\":\"Living room\"\r\n   }\r\n}\r\n```\r\n##### SaveDevices (13)\r\nThis request will send an array of devices.\r\n```json\r\n{\r\n   \"messageType\":13,\r\n   \"size\": 2,\r\n   \"devices\": [\r\n      {\r\n         \"id\":2,\r\n         \"maxValue\":100,\r\n         \"minValue\":0,\r\n         \"name\":\"Temperature A\",\r\n         \"precision\":5,\r\n         \"type\":1,\r\n         \"unitLabel\":\"\\u00B0C\",\r\n         \"isTriggerValue\":false\r\n      },\r\n      {\r\n         ...\r\n      }\r\n    ]\r\n}\r\n```\r\n##### SaveScenarios (15)\r\nThis request will send an array of scenarios for the device (deviceId).\r\n```json\r\n{\r\n   \"messageType\":15,\r\n   \"deviceId\":2,\r\n   \"size\": 2,\r\n   \"scenarios\": [\r\n      {\r\n         \"id\":3,\r\n         \"name\":\"Semaine\"\r\n      },\r\n      {\r\n         ...\r\n      }\r\n    ]\r\n}\r\n```\r\n##### SaveTasks (17)\r\nThis request will send an array of tasks for the scenario (scenarioId).\r\n```json\r\n{\r\n   \"messageType\":17,\r\n   \"scenarioId\":3,\r\n   \"size\": 2,\r\n   \"tasks\": [\r\n      {\r\n         \"id\":4,\r\n         \"status\":\"21\"\r\n      },\r\n      {\r\n         ...\r\n      }\r\n    ]\r\n}\r\n```\r\n##### SaveConditions (19)\r\nThis request will send an array of tasks for the task (taskId).\r\n```json\r\n{\r\n   \"messageType\":19,\r\n   \"taskId\":4,\r\n   \"size\": 2,\r\n   \"conditions\": [\r\n      {\r\n         \"id\":5,\r\n         \"type\":1,\r\n         \"beginDate\":\"2014-03-31\",\r\n         \"endDate\":\"2014-03-31\"\r\n      },\r\n      {\r\n         ...\r\n      }\r\n    ]\r\n}\r\n```\r\n### Response\r\n\r\n#### The Shell\r\nThe shell for responses is:\r\n\r\n```json\r\n{\r\n   \"messageType\": X,\r\n   \"status\": OK (true) | ERROR (false),\r\n   \"error\" : NULL | \"Error string\",\r\n   \"size\": Y,\r\n   \"YYY\": {...}\r\n}\r\n```\r\nwhere X is the enum of the response (number), Y is the size of the array and YYY is the additional information required.\r\n\r\n#### GetPlatform (2)\r\nThis is the response from GetPlatform Request (1)\r\n```json\r\n{\r\n   \"messageType\": 2,\r\n   \"status\": true,\r\n   \"error\" : NULL,\r\n   \"size\": 1,\r\n   \"platform\": {\r\n      \"id\":1,\r\n      \"enabled\":\"ON\",\r\n      \"name\":\"Television Set\",\r\n      \"room\":\"Living room\"\r\n   }\r\n}\r\n```\r\n#### GetDevices (4)\r\nThis is the response from GetDevice Request (3)\r\n```json\r\n{\r\n   \"messageType\": 4,\r\n   \"status\": true,\r\n   \"error\" : NULL,\r\n   \"size\": 2,\r\n   \"devices\": [\r\n      {\r\n         \"id\":2,\r\n         \"maxValue\":100,\r\n         \"minValue\":0,\r\n         \"name\":\"Temperature A\",\r\n         \"precision\":5,\r\n         \"type\":1,\r\n         \"unitLabel\":\"\\u00B0C\",\r\n         \"isTriggerValue\":false\r\n      },\r\n      {\r\n         ...\r\n      }\r\n    ]\r\n}\r\n```\r\n#### GetScenarios (6)\r\nThis is the response from GetScenarios Request (5)\r\n```json\r\n{\r\n   \"messageType\": 6,\r\n   \"status\": true,\r\n   \"error\" : NULL,\r\n   \"deviceId\":2,\r\n   \"size\": 2,\r\n   \"scenarios\": [\r\n      {\r\n         \"id\":3,\r\n         \"name\":\"Semaine\"\r\n      },\r\n      {\r\n         ...\r\n      }\r\n    ]\r\n}\r\n```\r\n#### GetTasks (8)\r\nThis is the response from GetTasks Request (7)\r\n```json\r\n{\r\n   \"messageType\": 8,\r\n   \"status\": true,\r\n   \"error\" : NULL,\r\n   \"scenarioId\":3,\r\n   \"size\": 2,\r\n   \"tasks\": [\r\n      {\r\n         \"id\":4,\r\n         \"status\":\"21\"\r\n      },\r\n      {\r\n         ...\r\n      }\r\n    ]\r\n}\r\n```\r\n#### GetConditions (10)\r\nThis is the response from GetConditions Request (9)\r\n```json\r\n{\r\n   \"messageType\": 10,\r\n   \"status\": true,\r\n   \"error\" : NULL,\r\n   \"taskId\": 4,\r\n   \"size\": 2,\r\n   \"conditions\": [\r\n      {\r\n         \"id\":5,\r\n         \"type\":1,\r\n         \"beginDate\":\"2014-03-31\",\r\n         \"endDate\":\"2014-03-31\"\r\n      },\r\n      {\r\n         ...\r\n      }\r\n    ]\r\n}\r\n```\r\n#### SavePlatform (12)\r\nThis is the response from SavePlatform Request (11)\r\n```json\r\n{\r\n   \"messageType\": 12,\r\n   \"status\": true,\r\n   \"error\" : NULL\r\n}\r\n```\r\n#### SaveDevices (14)\r\nThis is the response from SaveDevices Request (13)\r\n```json\r\n{\r\n   \"messageType\": 14,\r\n   \"status\": true,\r\n   \"error\" : NULL\r\n}\r\n```\r\n#### SaveScenarios (16)\r\nThis is the response from SaveScenarios Request (15)\r\n```json\r\n{\r\n   \"messageType\": 16,\r\n   \"status\": true,\r\n   \"error\" : NULL\r\n}\r\n```\r\n#### SaveTasks (18)\r\nThis is the response from SaveTasks Request (17)\r\n```json\r\n{\r\n   \"messageType\": 18,\r\n   \"status\": true,\r\n   \"error\" : NULL\r\n}\r\n```\r\n#### SaveConditions (20)\r\nThis is the response from SaveConditions Request (19)\r\n```json\r\n{\r\n   \"messageType\": 20,\r\n   \"status\": true,\r\n   \"error\" : NULL\r\n}\r\n```\r\n","google":"","note":"Don't delete this file! It's used internally to help with page regeneration."}